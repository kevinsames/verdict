# Databricks Asset Bundle configuration for Verdict
# Deploy: databricks bundle deploy
# Run:    databricks bundle run verdict_pipeline

bundle:
  name: verdict

# Import workflow definition
include:
  - orchestration/*.yaml

variables:
  model_endpoint:
    description: "Model Serving endpoint name to evaluate"
    default: "databricks-gpt-oss-20b"

  baseline_version:
    description: "Baseline model version for comparison"
    default: "1"

  candidate_version:
    description: "Candidate model version to evaluate"
    default: "2"

  dataset_version:
    description: "Prompt dataset version"
    default: "v1"

  catalog_name:
    description: "Unity Catalog name"
    default: "verdict"

  judge_endpoint:
    description: "LLM judge model endpoint"
    default: "databricks-llama-4-maverick"

  cluster_id:
    description: "Existing cluster ID for init task (optional)"
    default: ""

  qdrant_collection:
    description: "Qdrant collection name for testgen"
    default: "documents"

  qdrant_url:
    description: "Qdrant server URL"
    default: "http://localhost:6333"

targets:
  development:
    default: true
    mode: development
    workspace:
      root_path: /Users/${DATABRICKS_USER}/verdict_dev
    variables:
      catalog_name: verdict_dev
      cluster_id: ${DATABRICKS_CLUSTER_ID}

  staging:
    mode: staging
    workspace:
      root_path: /Shared/verdict_staging
    variables:
      catalog_name: verdict_staging

  production:
    mode: production
    workspace:
      root_path: /Shared/verdict
    variables:
      catalog_name: verdict
    permissions:
      - level: CAN_VIEW
        group_name: users